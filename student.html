<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>IZONE Institute</title>
<!-- Custom CSS -->
<link rel="stylesheet" href="http://127.0.0.1/ISD_Project/assets/css/home.css">
<style>
/* CSS cho thanh tìm kiếm */
.search-bar {
  float: right;
  margin-bottom: 20px;
}

.search-input {
  padding: 8px;
  border: 1px solid black;
  border-radius: 5px;
}

.search-btn {
  background-color: #008CBA;
  color: white;
  padding: 8px 15px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}
</style>
</head>
<body>
<div class="container">
  <div class="topbar">
    <div class="logo">
      <a href="home.html"><img id="logo" src="assets/img/izone-logo-color.png" alt="logo"></a>
    </div>
    <div class="login-btn"></div>
    <a href="index.html" class="btn">Log out</a>
  </div>
  <div class="sidebar">
    <ul>
      <li>
        <a href="student.html">
          <div>STUDENT</div>
        </a>
      </li>
      <li>
        <a href="">
          <div>PERFORMANCE</div>
        </a>
      </li>
      <li>
        <a href="">
          <div>CLASS</div>
        </a>
      </li>
      <li>
        <a href="admin.html">
          <div>ADMIN</div>
        </a>
      </li>
    </ul>
  </div>
  <div class="main">
    <!-- Thanh tìm kiếm -->
    <div class="search-bar">
      <input type="text" class="search-input" id="searchInput" placeholder="Search...">
      <button class="search-btn" id="searchBtn">Search</button>
    </div>
    
    <!-- Bảng danh sách học sinh -->
    <table class="student-table" id="studentData">
      <thead>
        <tr>
          <th>Student ID</th>
          <th>Student Name</th>
          <th>Class ID</th>
          <th>Phone Number</th>
          <th>Email</th>
          <th>Status</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <!-- Dữ liệu sinh viên sẽ được thêm vào đây bằng JavaScript -->
      </tbody>
    </table>
    <button class="setnamehere-btn add-btn">Add Student</button>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const searchBtn = document.getElementById('searchBtn');

  // Gắn sự kiện khi nhấn Enter trong ô tìm kiếm
  document.getElementById('searchInput').addEventListener('keypress', function(event) {
    if (event.key === 'Enter') {
      searchStudents();
    }
  });

  // Gắn sự kiện click vào nút tìm kiếm
  searchBtn.addEventListener('click', function() {
    searchStudents();
  });

  // Hàm tìm kiếm học sinh
  function searchStudents() {
    const searchInput = document.getElementById('searchInput').value.trim().toLowerCase();

    // Gửi yêu cầu tìm kiếm đến server
    fetch(`assets/php/student.php?search=${searchInput}`)
      .then(response => response.json())
      .then(data => {
        const studentTable = document.getElementById('studentData');
        const tbody = studentTable.querySelector('tbody');

        // Xóa dữ liệu cũ trong bảng
        tbody.innerHTML = '';

        // Duyệt qua mỗi sinh viên và tạo hàng mới trong bảng
        data.forEach(student => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${student.StudentID}</td>
            <td>${student.StudentName}</td>
            <td>${student.ClassID}</td>
            <td>${student.PhoneNumber}</td>
            <td>${student.StudentEmail}</td>
            <td>${student.Status}</td>
            <td><button class="setnamehere-btn edit-btn">Edit</button> <button class="setnamehere-btn delete-btn">Delete</button></td>
          `;

          // Thêm hàng vào bảng
          tbody.appendChild(row);
        });
      })
      .catch(error => console.error('Error fetching student data:', error));
  }

  // Khi trang tải lần đầu, hiển thị toàn bộ danh sách học sinh
  searchStudents();
});
</script>

</body>
</html>
